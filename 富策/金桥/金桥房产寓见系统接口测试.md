---
title: 金桥房产寓见系统接口测试
category: /富策/金桥
grammar_cjkRuby: true
tags: 金桥
---
# 企业 Customer
## 配置
```xml?linenums
<Handler Type="FuceFP.JQYJ.EntityCustomHttpPublishHandler,FuceFP.JQYJ">
      <Setting Description="寓见系统企业【新增/修改】同步" ServiceUrl="https://sxh.w7t.cn/JQadmin">
        <Login Url="login">
          <Param>
              {"userCode":"fuce","password":"123456"}
              </Param>
        </Login>
        <OnInserted Url="insertEnterprise">
          <Field From="Id" To="fuceId" />
          <Field From="Name" To="name" />
        </OnInserted>
        <OnUpdated Url="updateEnterprise">
          <Field From="Id" To="fuceId" />
          <Field From="Name" To="name" />
        </OnUpdated>
      </Setting>
</Handler>
```
## 企业新增
![企业新增](./images/1678864895598.png)

### 请求地址
```text?linenums
https://sxh.w7t.cn/JQadmin/insertEnterprise
```
### 请求参数
```json?linenums
{"fuceId":7209,"name":"测试新增10"} 
```
### 响应结果
```json?linenums
{"status":200,"message":"创建成功","serviceId":null,"data":null,"count":null}
```
## 企业修改
![企业修改](./images/1678865556077.png)

### 请求地址
```text?linenums
https://sxh.w7t.cn/JQadmin/updateEnterprise
```
### 请求参数
```json?linenums
{"fuceId":7209,"name":"测试修改10"}
```
### 响应结果
```json?linenums
{"status":200,"message":"成功更新","serviceId":null,"data":null,"count":null}
```
# 合同录入单 RevenueTicket
## 配置
```xml?linenums
      <Handler Type="FuceFP.JQYJ.EntityCustomHttpPublishHandler,FuceFP.JQYJ">
        <Setting Description="寓见系统房产同步" ServiceUrl="https://sxh.w7t.cn/JQadmin">
          <Login Url="login">
            <Param>
              {"userCode":"fuce","password":"123456"}
              </Param>
          </Login>
          <!--提交房间占用-->
          <OnSubmitting Url="useEnterpriseRoom" IsArray="true">
            <Field From="Customer.Code" To="enterpriseId"></Field>
            <Field From="TicketCode" To="fuceNo" />
            <Field Value="(findItem('SubBuildingAsset',item.ticketExtends4[0].text01).subAssetNo)" To="roomNo" />
          </OnSubmitting>
          <!--审批通过 上传合同-->
          <OnApproved Url="upLoadEnterpriseContract">
            <Field From="Customer" To="enterprise">
              <Field From="Code" To="fuceId" />
              <Field From="Name" To="name" />
            </Field>
            <Field From="." To="enterpriseContract">
              <Field From="TicketCode" To="fuceNo" />
              <Field From="ContractNumber" To="no" />
              <Field From="BeginTime" To="start" />
              <Field From="EndTime" To="end" />
              <Field Value="0" To="status" />
              <Field From="RefItem1.Code" To="contractType" />
              <Field From="TicketExtends3.Text02" To="leaseType" />
            </Field>
            <Field From="TicketDetails" To="enterpriseBill">
              <Field From="parentItem.TicketCode" To="fuceNo" />
              <Field From="Text01.Text01" To="billType" />
              <Field Value="1" To="payType" />
              <Field Value="0" To="status" />
              <Field From="TicketExtends3.Value03" To="unitAmount" />
              <Field From="RequestMoney" To="amount" />
              <Field Value="0" To="payAmount" />
              <Field From="DT1" To="startDay" />
              <Field From="DT2" To="endDay" />
              <Field Value="0" To="enterprisePay" />
            </Field>
          </OnApproved>
          <!--流程取消  取消房间占用-->
          <OnCancelled Url="deleteEnterpriseRoom">
            <Field From="Customer" To="enterprise">
              <Field From="Code" To="fuceId" />
              <Field From="Name" To="name" />
            </Field>
            <Field From="TicketCode" To="fuceNo" />
            <Field From="TicketExtends4.Text01.SubAssetNo" To="roomNo" />
          </OnCancelled>
        </Setting>
      </Handler>
```
## 提交 - 占用房间
### 请求地址
```text?linenums
https://sxh.w7t.cn/JQadmin/useEnterpriseRoom
```
### 请求参数
```json?linenums
[
    {
        "enterpriseId":"XJQWL00001",
        "fuceNo":"HTLR:202303170001",
        "roomNo":"421弄2号楼102"
    }
]

```
### 响应结果
```json?linenums
{
    "status":200,
    "message":"占用成功",
    "serviceId":null,
    "data":null,
    "count":null
}
```

## 取消 - 房间占用  
### 请求地址
```text?linenums
https://sxh.w7t.cn/JQadmin/deleteEnterpriseRoom
```
### 请求参数
```json?linenums
[
    {
        "enterpriseId": "01.04.03.06",
        "fuceNo": "HTLR:202303130002",
        "roomNo": "测试名称B3-101"
    }
]
```
### 响应结果
```json?linenums
{
    "status":200,
    "message":"成功删除！",
    "serviceId":null,
    "data":null,
    "count":null
}
```

## 审批通过 - 上传合同
### 请求地址
```text?linenums
https://sxh.w7t.cn/JQadmin/upLoadEnterpriseContract
```
### 请求参数
```json?linenums
[
    {
        "enterpriseId":"XJQWL00001",
        "fuceNo":"HTLR:202303170001",
        "roomNo":"421弄2号楼102"
    }
]
```
### 响应结果
```json?linenums
{
    "status":200,
    "message":"成功删除！",
    "serviceId":null,
    "data":null,
    "count":null
}
```
